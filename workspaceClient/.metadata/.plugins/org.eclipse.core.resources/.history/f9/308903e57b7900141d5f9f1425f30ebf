package GUILogic;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.SQLException;

import javax.swing.JOptionPane;

import connections.ServerKeeper;
import GUI.ContainerPanel;
import GUI.MainMenu;

public class Logic {
	ServerKeeper SK = new ServerKeeper();
	private ContainerPanel CP;
	
	private String EmailKeeper;
	private String PassKeeper;
	private int AdminIntKeeper; /* skal måske bruges senere */
	
	public Logic() throws SQLException {
		CP = new ContainerPanel();
		initializeListeners();
	}
	
//	Starts GUI 
	public void startList() {
		CP.show(ContainerPanel.loginScreen);
		CP.setVisible(true);
	}
	
//	Login function and error message
	private class login implements ActionListener {
		public void actionPerformed(ActionEvent e) {
			String emailInput = CP.getLI().getTextFieldEmail().getText();
			String passwordInput = CP.getLI().getTextFieldPassword().getText();
			if(SK.userChecker(emailInput, passwordInput).equals("1"))
			{
				System.out.println("Så langt så godt");
				CP.show(ContainerPanel.mainMenu);
			}
			else
			{
				JOptionPane.showMessageDialog (null, "You have entered an incorrect username or password", "Information", JOptionPane.INFORMATION_MESSAGE);
			}
		}
	}
	
	private class LogOut implements ActionListener {
		// When button pushed, show login screen
		public void actionPerformed(ActionEvent e) {
			String UserMenuController = e.getActionCommand();
			switch (UserMenuController) {
			case "LogOut":
				CP.show(ContainerPanel.loginScreen);
				break;

//			case "UserList":
//				viewUser();
//				CP.show(ContainerPanel.userView);
//				break;

//			case "EventList":
//				CP.show(ContainerPanel.eventView);
//				break;

//			case "NoteList":
//				CP.show(ContainerPanel.noteView);
//				break;

//			case "QAWList":
//				displayWeather();
//				displayQuote();
//				CP.show(ContainerPanel.quoteAndWeather);
//				break;
//			case "CalendarList":
//				CP.show(ContainerPanel.calendarList);
//				break;
			}
		}
	}

	private void initializeListeners() {
		CP.getLI().addActionListenerLoginScreen(new login());
		CP.getMM().addActionListenerMainMenu(new LogOut());
		
	}
	
}
